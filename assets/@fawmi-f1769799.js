import{o as $,c as y,r as f,a as L,n as F,b as U,m as x,t as q,d as C}from"./@vue-00b20f2b.js";import{M as B}from"./@googlemaps-b4d342ab.js";const M=e=>{let t=!1,a;return()=>(t||(t=!0,a=e()),a)};class P{static isServer(){return typeof document>"u"}}function T(e){const t=document.createElement("SCRIPT");if(typeof e!="object")throw new Error("options should  be an object");Array.prototype.isPrototypeOf(e.libraries)&&(e.libraries=e.libraries.join(",")),e.v||(e.v=3.47),e.callback="vueGoogleMapsInit";let s="https://maps.googleapis.com/maps/api/js?"+Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(e[r])).join("&");return t.setAttribute("src",s),t.setAttribute("async",""),t.setAttribute("defer",""),t}let A=!1;function D(e){if(!P.isServer()){if(A)throw new Error("You already started the loading of google maps");{A=!0;const t=T(e);document.head.appendChild(t)}}}const S=(e,t,a)=>{for(let s of a){const r=`on${s.charAt(0).toUpperCase()}${s.slice(1)}`.replace(/[-_]+(.)?/g,(o,n)=>n?n.toUpperCase():"");e.$props[r]||e.$attrs[r]?t.addListener(s,o=>{e.$emit(s,o)}):(e.$gmapOptions.autobindAllEvents||e.$attrs[s])&&t.addListener(s,o=>{e.$emit(s,o)})}};function N(e,t,a,s=!1){let r=!1;function o(){r||(r=!0,e.$nextTick(()=>{r=!1,a()}))}for(let n of t)e.$watch(n,o,{immediate:s})}class E{static capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}}function w(e,t){return Object.keys(t).reduce((a,s)=>(e[s]!==void 0&&(a[s]=e[s]),a),{})}function k(e,t,a){for(let s in a){let{twoWay:r,type:o,trackProperties:n,noBind:i}=a[s];if(i)continue;const c="set"+E.capitalizeFirstLetter(s),b="get"+E.capitalizeFirstLetter(s),u=s.toLowerCase()+"_changed",p=e[s];if(typeof t[c]>"u")throw new Error(`${c} is not a method of (the Maps object corresponding to) ${e.$options._componentTag}`);o!==Object||!n?e.$watch(s,()=>{const m=e[s];t[c](m)},{immediate:typeof p<"u",deep:o===Object}):N(e,n.map(m=>`${s}.${m}`),()=>{t[c](e[s])},e[s]!==void 0),r&&(e.$gmapOptions.autobindAllEvents||e.$attrs[u])&&t.addListener(u,()=>{e.$emit(u,t[b]())})}}const H={inject:{$mapPromise:{default:"abcdef"}},provide(){return this.$mapPromise.then(e=>{this.$map=e}),{}}};function l(e){const{mappedProps:t,name:a,ctr:s,ctrArgs:r,events:o,beforeCreate:n,afterCreate:i,props:c,...b}=e,u=`$${a}Promise`,p=`$${a}Object`;return Z(!(b.props instanceof Array),"`props` should be an object, not Array"),{...typeof GENERATE_DOC<"u"?{$vgmOptions:e}:{},mixins:[H],props:{...c,...W(t)},render(){return""},provide(){const m=this.$mapPromise.then(h=>{this.$map=h;const d={...this.options,map:h,...w(this,t)};if(delete d.options,n){const z=n.bind(this)(d);if(z instanceof Promise)return z.then(()=>({options:d}))}return{options:d}}).then(({options:h})=>{const d=s();return this[p]=r?new(Function.prototype.bind.call(d,null,...r(h,w(this,c||{})))):new d(h),k(this,this[p],t),S(this,this[p],o),i&&i.bind(this)(this[p]),this[p]});return this[u]=m,{[u]:m}},unmounted(){this[p]&&this[p].setMap&&this[p].setMap(null)},...b}}function Z(e,t){if(!e)throw new Error(t)}function W(e){return Object.entries(e).map(([t,a])=>{const s={};return"type"in a&&(s.type=a.type),"default"in a&&(s.default=a.default),"required"in a&&(s.required=a.required),[t,s]}).reduce((t,[a,s])=>(t[a]=s,t),{})}const Y={draggable:{type:Boolean},editable:{type:Boolean},options:{twoWay:!1,type:Object},path:{type:Array,twoWay:!0}},J=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],K=l({mappedProps:Y,props:{deepWatch:{type:Boolean,default:!1}},events:J,name:"polyline",ctr:()=>google.maps.Polyline,afterCreate(){let e=()=>{};this.$watch("path",t=>{if(t){e(),this.$polylineObject.setPath(t);const a=this.$polylineObject.getPath(),s=[],r=()=>{this.$emit("path_changed",this.$polylineObject.getPath())};s.push([a,a.addListener("insert_at",r)]),s.push([a,a.addListener("remove_at",r)]),s.push([a,a.addListener("set_at",r)]),e=()=>{s.map(([o,n])=>google.maps.event.removeListener(n))}}},{deep:this.deepWatch,immediate:!0})}}),Q={draggable:{type:Boolean},editable:{type:Boolean},options:{type:Object},path:{type:Array,twoWay:!0,noBind:!0},paths:{type:Array,twoWay:!0,noBind:!0}},X=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],I=l({props:{deepWatch:{type:Boolean,default:!1}},events:X,mappedProps:Q,name:"polygon",ctr:()=>google.maps.Polygon,beforeCreate(e){e.path||delete e.path,e.paths||delete e.paths},afterCreate(e){let t=()=>{};this.$watch("paths",a=>{if(a){t(),e.setPaths(a);const s=()=>{this.$emit("paths_changed",e.getPaths())},r=[],o=e.getPaths();for(let n=0;n<o.getLength();n++){let i=o.getAt(n);r.push([i,i.addListener("insert_at",s)]),r.push([i,i.addListener("remove_at",s)]),r.push([i,i.addListener("set_at",s)])}r.push([o,o.addListener("insert_at",s)]),r.push([o,o.addListener("remove_at",s)]),r.push([o,o.addListener("set_at",s)]),t=()=>{r.map(([n,i])=>google.maps.event.removeListener(i))}}},{deep:this.deepWatch,immediate:!0}),this.$watch("path",a=>{if(a){t(),e.setPaths(a);const s=e.getPath(),r=[],o=()=>{this.$emit("path_changed",e.getPath())};r.push([s,s.addListener("insert_at",o)]),r.push([s,s.addListener("remove_at",o)]),r.push([s,s.addListener("set_at",o)]),t=()=>{r.map(([n,i])=>google.maps.event.removeListener(i))}}},{deep:this.deepWatch,immediate:!0})}}),V={center:{type:Object,twoWay:!0,required:!0},radius:{type:Number,twoWay:!0},draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},options:{type:Object,twoWay:!1}},ee=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],te=l({mappedProps:V,name:"circle",ctr:()=>google.maps.Circle,events:ee}),se={bounds:{type:Object,twoWay:!0},draggable:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},options:{type:Object,twoWay:!1}},ae=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],re=l({mappedProps:se,name:"rectangle",ctr:()=>google.maps.Rectangle,events:ae}),g=(e,t)=>{const a=e.__vccOpts||e;for(const[s,r]of t)a[s]=r;return a},oe={animation:{twoWay:!0,type:Number},attribution:{type:Object},clickable:{type:Boolean,twoWay:!0,default:!0},cursor:{type:String,twoWay:!0},draggable:{type:Boolean,twoWay:!0,default:!1},icon:{twoWay:!0},label:{},opacity:{type:Number,default:1},options:{type:Object},place:{type:Object},position:{type:Object,twoWay:!0},shape:{type:Object,twoWay:!0},title:{type:String,twoWay:!0},zIndex:{type:Number,twoWay:!0},visible:{twoWay:!0,default:!0}},_=["click","rightclick","dblclick","drag","dragstart","dragend","mouseup","mousedown","mouseover","mouseout"],ne=l({mappedProps:oe,events:_,name:"marker",ctr:()=>google.maps.Marker,inject:{$clusterPromise:{default:null}},emits:_,unmounted(){this.$markerObject&&(this.$clusterObject?this.$clusterObject.removeMarker(this.$markerObject,!0):this.$markerObject.setMap(null))},beforeCreate(e){return this.$clusterPromise&&(e.map=null),this.$clusterPromise},afterCreate(e){_.forEach(t=>{e.addListener(t,a=>{this.$emit(t,a)})}),this.$clusterPromise&&this.$clusterPromise.then(t=>{this.$clusterObject=t,t.addMarker(e)})}});function ie(e,t,a,s,r,o){return $(),y("div",{onClick:t[0]||(t[0]=()=>{console.log("sdfsd")})},[f(e.$slots,"default")])}const ce=g(ne,[["render",ie]]),v={maxZoom:{type:Number,twoWay:!1},batchSizeIE:{type:Number,twoWay:!1},calculator:{type:Function,twoWay:!1},enableRetinaIcons:{type:Boolean,twoWay:!1},gridSize:{type:Number,twoWay:!1},ignoreHidden:{type:Boolean,twoWay:!1},imageExtension:{type:String,twoWay:!1},imagePath:{type:String,twoWay:!1},imageSizes:{type:Array,twoWay:!1},minimumClusterSize:{type:Number,twoWay:!1},styles:{type:Array,twoWay:!1},zoomOnClick:{type:Boolean,twoWay:!1}},pe=["click","rightclick","dblclick","drag","dragstart","dragend","mouseup","mousedown","mouseover","mouseout"],le=l({mappedProps:v,events:pe,name:"cluster",ctr:()=>{if(typeof B>"u"){const e="MarkerClusterer is not installed!";throw console.error(e),new Error(e)}return B},ctrArgs:({map:e,...t})=>[e,[],t],afterCreate(e){const t=()=>{const a=e.getMarkers();e.clearMarkers(),e.addMarkers(a)};for(let a in v)v[a].twoWay&&this.$on(a.toLowerCase()+"_changed",t)},updated(){this.$clusterObject&&this.$clusterObject.repaint()},beforeUnmount(){this.$children&&this.$children.length&&this.$children.forEach(e=>{e.$clusterObject===this.$clusterObject&&(e.$clusterObject=null)}),this.$clusterObject&&this.$clusterObject.clearMarkers()}});function de(e,t,a,s,r,o){return $(),y("div",null,[f(e.$slots,"default")])}const ue=g(le,[["render",de]]),me={options:{type:Object,required:!1,default(){return{}}},position:{type:Object,twoWay:!0},zIndex:{type:Number,twoWay:!0}},he=["domready","click","closeclick","content_changed"],fe=l({mappedProps:me,events:he,name:"infoWindow",ctr:()=>google.maps.InfoWindow,props:{opened:{type:Boolean,default:!0}},inject:{$markerPromise:{default:null}},mounted(){const e=this.$refs.infoWindow;e.parentNode.removeChild(e)},beforeCreate(e){if(e.content=this.$refs.infoWindow,this.$markerPromise)return delete e.position,this.$markerPromise.then(t=>(this.$markerObject=t,t))},emits:["closeclick"],methods:{_openInfoWindow(){this.$infoWindowObject.close(),this.opened?this.$infoWindowObject.open(this.$map,this.$markerObject):this.$emit("closeclick")}},afterCreate(){this._openInfoWindow(),this.$watch("opened",()=>{this._openInfoWindow()})}}),$e={ref:"infoWindow"};function ye(e,t,a,s,r,o){return $(),y("div",$e,[f(e.$slots,"default")],512)}const ge=g(fe,[["render",ye]]),be={props:["resizeBus"],data(){return{_actualResizeBus:null}},created(){typeof this.resizeBus>"u"?this.$data._actualResizeBus=this.$gmapDefaultResizeBus:this.$data._actualResizeBus=this.resizeBus},methods:{_resizeCallback(){this.resize()},isFunction(e){return e&&{}.toString.call(e)==="[object Function]"},_delayedResizeCallback(){this.$nextTick(()=>this._resizeCallback())}},watch:{resizeBus(e){this.$data._actualResizeBus=e},"$data._actualResizeBus"(e,t){t&&t.$off("resize",this._delayedResizeCallback)}},unmounted(){this.$data._actualResizeBus&&this.isFunction(this.$data._actualResizeBus.$off)&&this.$data._actualResizeBus.$off("resize",this._delayedResizeCallback)}};function we(e){let t=0;e(()=>{t+=1},()=>{t=Math.max(0,t-1)},()=>t===0)}const j={center:{required:!0,twoWay:!0,type:Object,noBind:!0},zoom:{required:!1,twoWay:!0,type:Number,noBind:!0},heading:{type:Number,twoWay:!0},mapTypeId:{twoWay:!0,type:String},tilt:{twoWay:!0,type:Number},options:{type:Object,default(){return{}}}},R=["bounds_changed","click","dblclick","drag","dragend","dragstart","idle","mousemove","mouseout","mouseover","resize","rightclick","tilesloaded"],_e=["panBy","panTo","panToBounds","fitBounds"].reduce((e,t)=>(e[t]=function(){this.$mapObject&&this.$mapObject[t].apply(this.$mapObject,arguments)},e),{}),ve={resize(){this.$mapObject&&google.maps.event.trigger(this.$mapObject,"resize")},resizePreserveCenter(){if(!this.$mapObject)return;const e=this.$mapObject.getCenter();google.maps.event.trigger(this.$mapObject,"resize"),this.$mapObject.setCenter(e)},_resizeCallback(){this.resizePreserveCenter()}},je={mixins:[be],props:W({...j,...R.reduce((e,t)=>({...e,[`on${t.charAt(0).toUpperCase()}${t.slice(1)}`.replace(/[-_]+(.)?/g,(a,s)=>s?s.toUpperCase():"")]:Function}),{})}),inheritAttrs:!1,provide(){return this.$mapPromise=new Promise((e,t)=>{this.$mapPromiseDeferred={resolve:e,reject:t}}),{$mapPromise:this.$mapPromise}},emits:["center_changed","zoom_changed","bounds_changed"],computed:{finalLat(){return this.center&&typeof this.center.lat=="function"?this.center.lat():this.center.lat},finalLng(){return this.center&&typeof this.center.lng=="function"?this.center.lng():this.center.lng},finalLatLng(){return{lat:this.finalLat,lng:this.finalLng}}},watch:{zoom(e){this.$mapObject&&this.$mapObject.setZoom(e)}},mounted(){return this.$gmapApiPromiseLazy().then(()=>{const e=this.$refs["vue-map"],t={...this.options,...w(this,j)};return delete t.options,this.$mapObject=new google.maps.Map(e,t),k(this,this.$mapObject,j),S(this,this.$mapObject,R),we((a,s,r)=>{this.$mapObject.addListener("center_changed",()=>{r()&&this.$emit("center_changed",this.$mapObject.getCenter()),s()}),N(this,["finalLat","finalLng"],()=>{a(),this.$mapObject.setCenter(this.finalLatLng)})}),this.$mapObject.addListener("zoom_changed",()=>{this.$emit("zoom_changed",this.$mapObject.getZoom())}),this.$mapObject.addListener("bounds_changed",()=>{this.$emit("bounds_changed",this.$mapObject.getBounds())}),this.$mapPromiseDeferred.resolve(this.$mapObject),this.$mapObject}).catch(e=>{throw e})},methods:{...ve,..._e}},Oe={class:"vue-map-hidden"};function Pe(e,t,a,s,r,o){return $(),y("div",{class:U(["vue-map-container",e.$attrs.class])},[L("div",{ref:"vue-map",class:"vue-map",style:F(e.$attrs.style?e.$attrs.style:"")},null,4),L("div",Oe,[f(e.$slots,"default")]),f(e.$slots,"visible")],2)}const ke=g(je,[["render",Pe]]),We={options:{type:Object,twoWay:!1,default:()=>{}},data:{type:Array,twoWay:!0}},ze=[],Le=l({mappedProps:We,name:"heatmap",ctr:()=>google.maps.visualization.HeatmapLayer,events:ze}),Ce=e=>{const t=e.addEventListener?e.addEventListener:e.attachEvent;function a(s,r){if(s==="keydown"){const o=r;r=function(n){const i=document.getElementsByClassName("pac-item-selected").length>0;if(n.which===13&&!i){const c=document.createEvent("Event");c.keyCode=40,c.which=40,o.apply(e,[c])}o.apply(e,[n])}}t.apply(e,[s,r])}e.addEventListener=a,e.attachEvent=a},O={bounds:{type:Object},componentRestrictions:{type:Object,noBind:!0},types:{type:Array,default:function(){return[]}}},Be={selectFirstOnEnter:{required:!1,type:Boolean,default:!1},options:{type:Object}},Me={mounted(){this.$gmapApiPromiseLazy().then(()=>{if(this.selectFirstOnEnter&&Ce(this.$refs.input),typeof google.maps.places.Autocomplete!="function")throw new Error("google.maps.places.Autocomplete is undefined. Did you add 'places' to libraries when loading Google Maps?");const e={...w(this,O),...this.options};this.$autocomplete=new google.maps.places.Autocomplete(this.$refs.input,e),k(this,this.$autocomplete,O),this.$watch("componentRestrictions",t=>{t!==void 0&&this.$autocomplete.setComponentRestrictions(t)}),this.$autocomplete.addListener("place_changed",()=>{this.$emit("place_changed",this.$autocomplete.getPlace())})})},props:{...W(O),...Be}};function Ae(e,t,a,s,r,o){return $(),y("input",x({ref:"input"},e.$attrs,q(e.$attrs,!0)),null,16)}const Ee=g(Me,[["render",Ae]]);let G=null;function Ge(e,t){t={installComponents:!0,autobindAllEvents:!1,...t},G=C({data:function(){return{gmapApi:null}}});const a=C();let s=Re(t);e.mixin({created(){this.$gmapDefaultResizeBus=a,this.$gmapOptions=t,this.$gmapApiPromiseLazy=s}}),e.$gmapDefaultResizeBus=a,e.$gmapApiPromiseLazy=s,t.installComponents&&(e.component("GMapMap",ke),e.component("GMapMarker",ce),e.component("GMapInfoWindow",ge),e.component("GMapCluster",ue),e.component("GMapPolyline",K),e.component("GMapPolygon",I),e.component("GMapCircle",te),e.component("GMapRectangle",re),e.component("GMapAutocomplete",Ee),e.component("GMapHeatmap",Le))}function Re(e){function t(){return G.gmapApi={},window.google}if(e.load)return M(()=>P.isServer()?new Promise(()=>{}).then(t):new Promise((a,s)=>{try{window.vueGoogleMapsInit=a,D(e.load)}catch(r){s(r)}}).then(t));{const a=new Promise(s=>{P.isServer()||(window.vueGoogleMapsInit=s)}).then(t);return M(()=>a)}}export{g as _,Ge as i};
